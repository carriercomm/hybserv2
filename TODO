$Id$

Today's MOTD
------------
Paranoid schizophrenics outnumber their enemies at least two to one.


Pending bugs:
-------------
*) bunch of *old* stuff I've found around:
  - allow GHOST/RECOVER/RELEASE on linked nick without password?
  - take IP bans into account (DONE)
  - don't add duplicate bans (DONE)
  - deny /cs unban if user has a +e (DONE)
  - don't autorem if user has a +e (DONE)
  - generally change or remove autorem
  - deny /cs invite if the invite would not be stored (chan is not +i)
    (notice removed, that will help quite a bit)
  - add /cs getkey (returns channel key), for same accesslvl as /cs invite (DONE)
  - operserv admins don't seem to get autovoice/autoop when the level is set to
    0, while regular users would (DONE)
  - /cs info on private channel should require 1, not CMDINVITE (DONE)
*) several from Ales - check at the end of file.
*) get rid of bashisms in cleandb
*) From Jared:
  If a channel is set to restricted with guard off, when a user gets
  banned from the channel chanserv hops in (and is suppoesd to stay in a
  for a few minutes to enforce the ban) but he stays in there forever and
  never leaves even if restricted is turned off..   
*) From Jared:
  if a user adds a linked nickname then deletes that linked nickname
  several times they start getting the too many nicks error.. it looks
  like the numlinks is being incremented several times every time someone
  adds a link and not being decremented at the same rate...
*) secure doesn't clear ban for admin [why?]
*) does not want to unforbid sometimes (??)
*) fix *LOCK functions
*) temp ignores rotate (possible overflow)
*) 20 nicknames problem
*) > I plan on just setting the nickflood level higher in config.h, but
   could there be a configurable option via a operserv set command?
   Also, are there docs on what each operserv set variable is? Some of them
   are obvious, and then again, some aren't...
*) [21:15] :: monolith: trace is showing a blank field for channels
   [21:15] :: monolith: when using -long
*) [23:18] :: monolith: hey buddy, i noticed that the OPERWALL/WALLOPS
   thing wasn't in your latest cvs
*) oper can't setup anything with other nicks
*) check dccprocess with similar bug as botprocess..
*) o_match - fix to add *! and similar stuff
*) set allowguardchannel 0 -> part all channels immediately
*) nickserv and chanserv have to be always enabled - fix this.
*) channel modes don't always get synced on restart
*) fix invalid gnote count
*) clear modes doesn't clear limit
*) check for OnAccessList() without master nick call - only when necessary
*) remember to transfer access list in DeleteLink()
*) seems it is possible that nickname stays ghosted more than necessary if
   nick QUITs
*) send all mlock modes on channel creation
*) OperServ does not completely support hybrid7 modes yet, (for example
   .channel command or SECURE)
*) sed helpfiles so that they have proper time values
   NOTE: this should be done via %v or %t.. something like it
*) add flag for keeping other people's channel/nick status when
   reconnecting - i find it annonying to look at forced synching


Features yet to come:
---------------------
*) (13:37:00) padde: Any chance there could be coded an option, that would
   allow to specify a range of ports to be used to DCC services?
   (13:37:00) padde: would be usefull if the services is behind firewall
*) (23:37:25) andrew: hello
   (23:37:47) andrew: i'm just wondering if hybserv can be configured to
   block nicks that contain explicit words?
*)PuNkSterQFeTus: Heres an idea
  PuNkSterQFeTus: Instead of just /kill chan
  PuNkSterQFeTus: how about adding /kline chan
*) hide nick options..
*) save auth users before restart/die with a small ts..
*) blackbook for all operserv commands. searcheable, add, remove, list.
*) adx wishlist:
  1)
  <adx> for example, to create a new operserv's command
  <adx> "RESTRICT"
  <adx> you pass the mask, for example *!*@you.are.a.bad.guy
  <adx> then you can set some restrictions
  <adx> for example
  <adx> -nonickreg
  <adx> -max 5 (connections)
  <adx> -nolink
  <adx> etc...
  3)
  put operserv glines in oper.db
*) rewrite documentation
*) add SVSNICK, SWHOIS, etc. for other IRCDs
*) modularisation (_very_ unlikely to happen)
*) completely document API
*) localisation
*) misc stuff:
   private notes on channel and user records, available only to staff
   PGP/GPG keys per user
   multiple URL's, multiple email addresses (with limits)
   geek code
*) use btree&mmap (additionally use adns and glib)
*) improve block allocator
*) add cidr & ranged ip's
*) add tcpwrap capatibilities
*) ziplinks (perhaps use servlink?)
*) ideas by "John Binder" <jbinder@kgazd.bme.hu>:
   flood ctrl for services itself
   flood ctrl for channels: public flood, join-part flood, kick flood,
    deop flood, nick flood -> however, for some features it is obvious
    that chanserv/operserv will have to reside on channels, which I
    dislike (-kre)
*) implement modes flood trigger (and below)
*) add some features from http://www.appwatch.com/Linux/App/879/data.html
*) be compatibile with other ircds (!!)
*) umode +g ACCEPT list (BR's idea)

-----
From Ales Tokic:
 
6) SECURE naredba sada prakticno nista ne radi osim sto OperServ/servisi setuju +ntp na kanalu o poskida +ikl.
Niti poskida opove svima koji nemaju +f flag na servisima, niti ukloni ban(ove) adminu, niti opuje +f korisnike.
 
--- TheOne sets ban on *!*alpha@*.balcan.net
--- TheOne gives channel operator status to alexius
--- TheOne removes channel operator status from TheOne
--- alexius sets mode +i #test
--- alexius sets channel limit to 2
>OperServ< secure #test
-services.balcan.net/Wallops- OPERWALL - OperServ: SECURE #test
--- OperServ sets mode +n #test
--- OperServ sets mode +t #test
--- OperServ sets mode +p #test
--- OperServ sets mode -i #test
--- OperServ removes user limit
-OperServ- #test has been secured
 
"TheOne" i "mofo" su identifikovani admini, alexius je regular user. Primer govori za sebe. Ista situacija je
i ako je admin van kanala. Ranije (u prethodnim hybserv verzijama) je cini mi se jedini problem bio
neuklanjanje banova adminima.
 
7) Zadnja stvar :)
Count za bans/exempts/invex nije pravilan, tj. nije potpun. Naime, kod netsplitova nakon povratka servera svaki server
posalje modes (bans, exempts, invex, chan modes...) i servisi takodje sve to prime. Problem se javi kada se
vise puta desi netsplit jer se tabele u hybservu pune ne proveravajuci duplikate. Primer:
 
...
<OperServ> Ban Exceptions:
<OperServ>  [ 1] [*!sasa@the.more.people.smoke.herb.the.more.babylon.fall] [irc.exex.org] [Wed Jul  6 14:22:57 2005]
<OperServ>  [ 2] [*!sasa@the.more.people.smoke.herb.the.more.babylon.fall] [irc.exex.org] [Wed Jul  6 00:56:57 2005]
<OperServ>  [ 3] [*!sasa@the.more.people.smoke.herb.the.more.babylon.fall] [irc.teleklik.net] [Tue Jul  5 23:53:07 2005]
<OperServ>  [ 4] [*!sasa@the.more.people.smoke.herb.the.more.babylon.fall] [irc.teleklik.net] [Tue Jul  5 23:50:52 2005]
<OperServ>  [ 5] [*!sasa@the.more.people.smoke.herb.the.more.babylon.fall] [irc.exex.org] [Mon Jul  4 20:50:39 2005]
<OperServ>  [ 6] [*!sasa@the.more.people.smoke.herb.the.more.babylon.fall] [OperServ  ] [Mon Jul  4 03:19:52 2005]
<OperServ> 1 match found
 
Dakle, servisi dupliraju te stvari. Jedna check funkcija bi to resila,
da se ne dupliraju identicni modovi (bans/exempts/invex) - ovo ne ukljucuje channel modes.
Kada uradis /msg chanserv clear #chan bans desi se da CS skine ban toliko puta koliko ga ima u tabeli
(iako se radi o jednom banu vise puta dupliranom).
